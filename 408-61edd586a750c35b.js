(self.webpackChunkocr=self.webpackChunkocr||[]).push([["408"],{41975:function(e,t,o){"use strict";o.r(t),o.d(t,{default:()=>p});var n=o(8081),r=o.n(n),s=o(23645),a=o.n(s),i=o(61667),c=o.n(i),l=new URL(o(75476),o.b),d=a()(r()),u=c()(l);d.push([e.id,`body,input,ul,li,span,div,form,button{all:unset;box-sizing:border-box}div{display:block}span{display:inline}button,input{display:inline-block}button{cursor:pointer}body{background-color:#000}.loader{background-image:url(${u})}#app{max-width:800px;height:100vh;margin:auto;overflow:hidden}.layout{position:relative;height:100%;width:100%;padding-top:env(safe-area-inset-top);padding-right:env(safe-area-inset-right);padding-bottom:env(safe-area-inset-bottom);padding-left:env(safe-area-inset-left)}.layout .progress{position:absolute;bottom:env(safe-area-inset-bottom);width:100%;color:#fff;text-align:center}input[type=text]{background-color:hsla(0,0%,100%,.5);font-size:1.4em;font-family:Arial,Helvetica,sans-serif;padding:4px;display:block;width:100%}ul li{display:block;margin-bottom:4px;padding:4px;background-color:hsla(0,0%,100%,.8)}`,""]);const p=d},29455:function(e,t,o){var n=o(93379),r=o(7795),s=o(90569),a=o(3565),i=o(19216),c=o(44589),l=o(41975);l=l.__esModule?l.default:l;var d={};d.styleTagTransform=c,d.setAttributes=a,d.insert=s.bind(null,"head"),d.domAPI=r,d.insertStyleElement=i,n(l,d),e.exports=l&&l.locals||{}},75476:function(e,t,o){"use strict";e.exports=o.p+"14f53e6ac3804ba2.svg"},3807:function(e,t,o){"use strict";o.d(t,{Fv:()=>n,Vj:()=>r});const n=e=>("string"!=typeof e&&console.log(e),e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()),r=e=>(e?e+"-":"")+Date.now().toString(32)+"-"+Math.random().toString(32).substring(2)},64877:function(e,t,o){"use strict";o.r(t),o.d(t,{default:()=>b}),o(8647);var n=o(25595),r=o(3807);let s;Promise.all(["undefined"!=typeof window?fetch("/db.json",{cache:"no-cache"}).then((e=>e.json())).catch((()=>null)):Promise.resolve(),new Promise(((e,t)=>{const o=indexedDB.open("app",1);o.onupgradeneeded=e=>{const t=o.result;e.oldVersion||(t.createObjectStore("cards"),t.createObjectStore("abilities"),t.createObjectStore("attacks"))},o.onerror=()=>{console.error("[indexeddb]",o.error),t(o.error)},o.onsuccess=t=>{e(t.target.result)}}))]).then((async([e,t])=>{var o,n,a;s=t,e&&await(o=s,n="cards",a=t=>{for(const o of e)o.search=[o.id,`${o.ext} ${o.extId}`,(0,r.Fv)(o.fr?.name||""),(0,r.Fv)(o.en?.name||"")].filter((e=>!!e)).map((e=>e.trim())).join("\n"),t.put(o,o.id)},new Promise(((e,t)=>{const r=o.transaction(n,"readwrite");r.oncomplete=e,r.onerror=t,a(r.objectStore(n))})))}));var a=o(90050);const i={class:"layout"},c={class:"progress"},l={__name:"layout",setup(e){const t=(0,n.iH)(0);return(0,n.bv)((async()=>{console.log(await navigator.storage.persist());const e=await(0,a.Z)({searchCards:{all:!1,keywords:null}});navigator.serviceWorker.addEventListener("message",(async o=>{const{cache:n}=o.data,r="https://pub-4211d6b528d54ed69e8ec217f023723e.r2.dev/",s=e.map((e=>[r+`${e.ext}-${e.extId}-fr-hd-c.avif`,r+`${e.ext}-${e.extId}-en-hd-c.avif`])).flat(1),a=s.filter((e=>!n[e]));let i=s.length-a.length;for(const e of a)await navigator.serviceWorker.controller.postMessage({cache:e}),await new Promise((e=>setTimeout(e,50))),i++,t.value=i/s.length*100,i%100==0&&console.log(`[img] Downloading img ${Number(i/s.length*100).toFixed(2)}%`)}),{once:!0}),navigator.serviceWorker.controller.postMessage({getCache:"img"})})),(e,o)=>{const r=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",i,[(0,n.Wm)(r),(0,n._)("div",c,(0,n.zw)(Number(t.value).toFixed(2))+" %",1)])}}};o(29455);const d=l;var u=o(29938);const p=e=>e.then?e.then((e=>e.default||e),(e=>{console.error(e),/googlebot/i.test(navigator.userAgent)&&location.reload()})):(0,n.RC)((()=>p(e())));var g;const h=(0,u.p7)({history:(0,u.PO)(),base:"/",routes:(g=p,[{name:"search",path:"/",component:()=>g(o.e("322").then(o.bind(o,27780)))}])}),f={compatConfig:{MODE:3},name:"icon",inheritAttrs:!1,render(){const e={...(0,n.IU)(this.$attrs)};e.width||(e.width=e.size||"15"),e.height||(e.height=e.size||"15"),delete e.size;let t=e.src;return t=t?.default||t,delete e.src,(0,n.h)(t,e,this.$slots.default&&this.$slots.default())}};window.addEventListener("touchstart",(()=>{}),{passive:!0});const m=(0,n.ri)(d).use(h);m.config.globalProperties.$emitAsync=function(e,t){t||(t={});let o=Promise.resolve();return t.waitUntil=e=>o=e,this.$emit(e,t),o},m.component("UiIcon",f),m.mount("#app");const b=m},90050:function(e,t,o){"use strict";o.d(t,{Z:()=>n});const n=e=>new Promise((t=>{const n=new Worker(new URL(o.p+o.u("866"),o.b),Object.assign({},{name:"idb",type:"module"},{type:void 0}));n.onmessage=e=>{t(e.data)},n.postMessage(e)}))}}]);